<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
<style>
*{
    margin: 0;
    padding: 0;
}
#box{
    width: 100px;
    height: 100px;
    background: yellowgreen;
    position:absolute;
    left: 0;
    top: 0;
}
.y{
    width: 100px;
    height: 100px;
    background: yellowgreen;
    left: 0;
    position: absolute;
    top: 0;
    opacity: .5;
    z-index:10;
}

</style>
</head>
<body id="body">
    <div id="box"></div>

<script>

    let box = document.getElementById('box');
    let L = 0;
    let T = 0;
    let num = 0;
    let onoff = true;

    box.onmousedown = function(ev){
        L = ev.pageX - box.offsetLeft;
        T = ev.pageY - box.offsetTop;
        let div = document.createElement('div');
        body.appendChild(div);
        div.className = 'y';
        div.style.left = box.offsetLeft + 'px';
        div.style.top = box.offsetTop + 'px';

        document.onmousemove = function(ev){
            if(onoff){
                num ++;
                onoff = false;
            }

            div.style.left = ev.pageX - L + 'px';
            div.style.top = ev.pageY - T + 'px';
            // box.style.left = ev.pageX - L + 'px';
            // box.style.top = ev.pageY - T + 'px';
        }

        document.onmouseup = function(){
            
            box.style.left =  div.style.left;
            box.style.top =   div.style.top;
            div.remove();
            onoff = true;
            document.onmouseup = document.onmousemove = null;
        }
        return false;
    }

</script>
</body>
</html>